{% extends "base.html" %}
{% block title %}Status Update Â· SHK CMS{% endblock %}

{% block content %}
<h1 class="h4 mb-3">Status Update</h1>

<div class="card shadow-sm mb-3">
  <div class="card-body">
    <form method="POST" action="/statusupdate" class="row g-2 align-items-end">
      <div class="col-12 col-sm-6">
        <label class="form-label">Enter Cheque No</label>
        <input type="number" class="form-control" name="cheque_no" required>
      </div>
      <div class="col-12 col-sm-auto">
        <button class="btn btn-primary" type="submit"><i class="bi bi-search"></i> Search</button>
      </div>
    </form>
  </div>
</div>

{% if cheque %}
<div class="card shadow-sm">
  <div class="card-header bg-white"><strong>Cheque Details</strong></div>
  <div class="card-body">
    <div class="row g-3">
      <div class="col-6 col-md-3"><strong>Bank:</strong> {{ cheque.bank }}</div>
      <div class="col-6 col-md-3"><strong>Cheque No:</strong> {{ cheque.cheque_no }}</div>
      <div class="col-6 col-md-3"><strong>Amount:</strong> {{ cheque.amount }}</div>
      <div class="col-6 col-md-3"><strong>Vendor:</strong> {{ cheque.vendor }}</div>
      <div class="col-6 col-md-3"><strong>Status:</strong> {{ cheque.status }}</div>
      <div class="col-6 col-md-3"><strong>Status Date:</strong> {{ cheque.status_date }}</div>
    </div>

    <hr>
    <form method="POST" action="/updatestatus" class="row g-2 align-items-end">
      <input type="hidden" name="cheque_no" value="{{ cheque.cheque_no }}">
      <div class="col-12 col-sm-4">
        <label class="form-label">Select Date</label>
        <input type="date" class="form-control" name="status_date" required>
      </div>
      <div class="col-12 col-sm-8">
        <div class="d-flex flex-wrap gap-2">
          <button class="btn btn-success" name="status" value="Cashed" {% if cheque.status != 'Active' %}disabled{% endif %}>
            <i class="bi bi-check2-circle"></i> Cashed
          </button>
          <button class="btn btn-secondary" name="status" value="Cancelled" {% if cheque.status != 'Active' %}disabled{% endif %}>
            <i class="bi bi-x-circle"></i> Cancelled
          </button>
          <button class="btn btn-danger" name="status" value="Bounced" {% if cheque.status != 'Active' %}disabled{% endif %}>
            <i class="bi bi-exclamation-octagon"></i> Bounced
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endif %}
{% endblock %}
